// ç¤ºä¾‹å›è°ƒä»£ç 
User.get(fromId, {
	success: function(err, user) {
		if (err) return {error: err};
		user.friends.find(toId, function(err, friend) {
			if (err) return {error: err};
				user.sendMessage(friend, message, callback);
			});
	},
	failure: function(err) {
		return {error: err}
	}
})

//promise
User.get(fromId).then(function(user) {
		return user.friends.find(toId);
	}, function(err) {
		// æ²¡æ‰¾åˆ°ç”¨æˆ·
	})
	.then(function(friend) {
		return user.sendMessage(friend, message);
	}, function(err) {
		// ç”¨æˆ·çš„æœ‹å‹è¿”å›äº†å¼‚å¸¸
	})
	.then(function(success) {
		// user was sent the message
	}, function(err) {
		// å‘ç”Ÿé”™è¯¯äº†
});


//æ·»åŠ äº†ä¸€
//æµ‹è¯•add ä¸ commit åŒºåˆ«ïï¼d
