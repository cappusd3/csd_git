// 示例回调代码
User.get(fromId, {
	success: function(err, user) {
		if (err) return {error: err};
		user.friends.find(toId, function(err, friend) {
			if (err) return {error: err};
				user.sendMessage(friend, message, callback);
			});
	},
	failure: function(err) {
		return {error: err}
	}
})

//promise
User.get(fromId).then(function(user) {
		return user.friends.find(toId);
	}, function(err) {
		// 没找到用户
	})
	.then(function(friend) {
		return user.sendMessage(friend, message);
	}, function(err) {
		// 用户的朋友返回了异常
	})
	.then(function(success) {
		// user was sent the message
	}, function(err) {
		// 发生错误了
});


//添加了一行